{% extends "base.html" %}
{% load static %}

{% block page_title %}
    Track Finance - Recurring-transactions
{% endblock %}

{% block css_file %}
    <link rel="stylesheet" href="{% static 'expenses_tracker/recurring-transactions.css' %}">
{% endblock %}

{% block content %}
    
    <header>
        <h1>Recurring Transactions</h1>
    </header>
        <main>
            <section class="transaction-list">
                <div class="container">
                    <ul>
                        {% for field in recurring_transactions %}
                        <li class="list_display">
                            <div class="transaction-info">
                                <h2>{{ field.transaction_title|title }}</h2>
                                <hr>
                                <p>Amount: <strong>{{ user_currency }}{{ field.amount|floatformat:"2g" }}</strong></p>
                                <p>Category: {{ field.category }}</p>
                                <p>Frequency: {{ field.frequency }}</p>
                            </div>
                            <div class="transaction-date">
                                <div class="delete-button">
                                    <form method="POST" action="{% url 'recurring_transactions_page' %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="recurring_transaction_id" value="{{ field.id }}">
                                        <button type="submit"><img src="{% static 'expenses_tracker/images/delete-189.png' %}" alt="Delete"></button>
                                    </form>
                                </div>
                                <div class="date-info">
{#                                <p>Next Occurrence: {{ field.next_occurrence|date:"D, d M Y | H:i:s" }}</p>#}
                                    <p>Next occurrence in: {{ field.next_occurrence|timeuntil }}</p>
                                </div>
                            </div>
                            
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </section>
            <form method="post" action="{% url 'recurring_transactions_page' %}">
                {% include "expenses_tracker/include/right_sidebar.html" with url='recurring_transactions_page' %}
            </form>
        </main> 
    
    {% include "expenses_tracker/include/footer.html" %}

{% endblock %}